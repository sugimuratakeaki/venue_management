# 防災士研修センター会場管理システム システム概要書

## 1. システム概要

### 1.1 システム名称
防災士研修センター会場管理システム（Venue Management System for Disaster Prevention Training Center）

### 1.2 システムの目的
本システムは、防災士研修センターが日本全国で開催する防災士研修・セミナーにおいて、Web上に分散している会場情報を一元管理し、効率的な会場選定を支援する情報管理システムである。

### 1.3 システムの特徴
- **クラウドベースのWebアプリケーション**: インターネット経由でどこからでもアクセス可能
- **AI支援機能**: 会場サイトからの情報自動抽出・分類により入力作業を効率化
- **複数部屋・複数駅対応**: 同一会場の複数部屋、複数最寄り駅情報を詳細に管理
- **URL情報の一元管理**: 公式サイト、予約申込、GoogleマップURLを集約
- **包括的な情報管理**: 会場の基本情報から詳細な設備、料金、条件まで一元管理
- **履歴管理機能**: 全ての更新履歴を自動記録し、監査証跡を確保
- **直感的なユーザーインターフェース**: 使いやすさを重視した画面設計

## 2. システムアーキテクチャ

### 2.1 全体構成図

```
┌─────────────────────────────────────────────────────────────┐
│                         インターネット                          │
└─────────────────────────────────────────────────────────────┘
                                │
                    ┌──────────────────────┐
                    │  Replit Platform     │
                    │  (将来: AWS)         │
                    └──────────────────────┘
                                │
            ┌───────────────────────────────────────┐
            │                                       │
    ┌───────────────┐                    ┌──────────────────┐
    │  フロントエンド  │                    │   バックエンド     │
    │    (React)     │◄──────────────────►│  (FastAPI)       │
    │  Atomic Design │                    │   Python         │
    └───────────────┘                    └──────────────────┘
                                                    │
                                        ┌──────────────────────┐
                                        │                      │
                            ┌────────────────┐    ┌──────────────────┐
                            │  データベース    │    │   外部API連携     │
                            │ SQLite/PgSQL   │    │  OpenAI/Maps     │
                            └────────────────┘    └──────────────────┘
                                    │
                      ┌────────────────────────────────┐
                      │  フェーズ1: JSONファイル        │
                      │  フェーズ2: SQLite             │
                      │  フェーズ3: PostgreSQL         │
                      └────────────────────────────────┘
```

### 2.2 技術スタック

#### フロントエンド
- **フレームワーク**: React.js または Vue.js 3
- **UIライブラリ**: Material-UI または Vuetify
- **状態管理**: Redux または Vuex
- **HTTPクライアント**: Axios
- **スタイリング**: CSS Modules / Styled Components
- **ビルドツール**: Webpack / Vite

#### バックエンド
- **言語/フレームワーク**: Node.js (Express) または PHP (Laravel)
- **認証**: JWT (JSON Web Token)
- **APIドキュメント**: Swagger/OpenAPI
- **バリデーション**: Joi または Laravel Validation
- **ORM**: Sequelize または Eloquent

#### データベース
- **RDBMS**: MySQL 8.0以上
- **キャッシュ**: Redis
- **セッション管理**: Redis またはデータベース

#### インフラストラクチャ
- **Webサーバー**: Nginx または Apache
- **コンテナ**: Docker
- **オーケストレーション**: Docker Compose / Kubernetes
- **CI/CD**: GitHub Actions / GitLab CI
- **監視**: Prometheus + Grafana

#### 外部サービス連携
- **AI API**: OpenAI API または Claude API
- **地図サービス**: Google Maps API
- **郵便番号API**: 日本郵便 郵便番号検索API
- **メール送信**: SendGrid または Amazon SES

## 3. 主要機能概要

### 3.1 会場管理機能
会場情報の登録、編集、削除、検索を行う中核機能。

**主な機能**:
- 会場基本情報管理（施設名、住所、電話、メール等）
- URL情報管理（公式サイト、予約申込、Googleマップ）
- 複数部屋情報管理（部屋ごとの収容人数、設備等）
- 複数最寄り駅情報管理（駅名、路線、所要時間）
- 詳細情報管理（料金、条件等）
- 高度な検索・フィルタリング機能
- 一括インポート/エクスポート機能

### 3.2 イベント管理機能
イベント開催履歴を管理し、実績データを蓄積。

**主な機能**:
- イベント履歴登録（イベント名、開催日、使用部屋等）
- カレンダービューでの視覚的表示
- 実績レポート出力
- 参加人数統計

### 3.3 ユーザー管理・認証機能
システム利用者の管理と適切なアクセス制御を実現。

**主な機能**:
- ユーザー登録・認証
- 役割ベースのアクセス制御（RBAC）
- パスワード管理・リセット機能
- ログイン履歴管理

### 3.4 AI支援機能
人工知能を活用した入力支援により業務効率を向上。

**主な機能**:
- WebサイトURLからの自動情報抽出
- 複数部屋情報の自動識別・分類
- 複数最寄り駅情報の自動抽出
- 住所からGoogleマップURLの自動生成
- テキストデータの自動分類・構造化

### 3.5 レポート・分析機能
蓄積データを活用した各種レポート生成と分析。

**主な機能**:
- 利用統計レポート
- 会場比較分析
- コスト分析
- データビジュアライゼーション

### 3.6 履歴管理・監査機能
データの変更履歴を完全に記録し、監査要件に対応。

**主な機能**:
- 全操作の自動記録
- 変更内容の詳細追跡
- データ復元機能
- 監査レポート生成

## 4. データフロー

### 4.1 会場情報登録フロー

```
[ユーザー] → [入力画面] → [バリデーション] → [データベース保存]
                ↑                                    ↓
            [AI支援]                            [監査ログ記録]
```

### 4.2 会場検索フロー

```
[検索条件入力] → [検索クエリ生成] → [データベース検索] → [結果フィルタリング] → [画面表示]
                                            ↑
                                        [キャッシュ]
```

### 4.3 イベント履歴登録フロー

```
[イベント情報入力] → [会場選択] → [部屋選択] → [履歴登録] → [カレンダー更新]
                                    ↓
                                [実績データ蓄積]
```

## 5. セキュリティ設計

### 5.1 認証・認可
- **認証方式**: JWT（JSON Web Token）によるステートレス認証
- **認可方式**: RBAC（Role-Based Access Control）による権限管理
- **多要素認証**: オプションとして2要素認証を提供

### 5.2 データ保護
- **通信暗号化**: HTTPS（TLS 1.3）による全通信の暗号化
- **データ暗号化**: 機密データのデータベース暗号化
- **パスワード保護**: bcryptによるパスワードハッシュ化

### 5.3 セキュリティ対策
- **SQLインジェクション対策**: プリペアドステートメントの使用
- **XSS対策**: 入力値のサニタイゼーション、CSPヘッダーの設定
- **CSRF対策**: CSRFトークンの実装
- **レート制限**: API呼び出しのレート制限実装

### 5.4 監査・コンプライアンス
- **監査ログ**: 全操作の記録と定期的な監査
- **個人情報保護**: 個人情報保護法への準拠
- **データ保持**: 法令に基づくデータ保持期間の設定

## 6. システム要件

### 6.1 ハードウェア要件

#### サーバー（推奨構成）
- **CPU**: 4コア以上
- **メモリ**: 16GB以上
- **ストレージ**: SSD 500GB以上
- **ネットワーク**: 1Gbps以上

#### クライアント（最小要件）
- **CPU**: デュアルコア 2GHz以上
- **メモリ**: 4GB以上
- **ディスプレイ**: 1366×768以上
- **ネットワーク**: ブロードバンド接続

### 6.2 ソフトウェア要件

#### サーバー側
- **OS**: Ubuntu 20.04 LTS / CentOS 8 / Windows Server 2019以上
- **データベース**: MySQL 8.0以上
- **Webサーバー**: Nginx 1.18以上 / Apache 2.4以上
- **ランタイム**: Node.js 16以上 / PHP 8.0以上

#### クライアント側
- **OS**: Windows 10以上 / macOS 10.15以上 / Ubuntu 20.04以上
- **ブラウザ**: 
  - Chrome 90以上
  - Firefox 88以上
  - Safari 14以上
  - Edge 90以上

## 7. パフォーマンス目標

### 7.1 レスポンスタイム
- ページ読み込み: 2秒以内
- 検索処理: 3秒以内
- データ保存: 1秒以内
- レポート生成: 10秒以内

### 7.2 同時接続数
- 最大同時接続数: 100ユーザー
- 推奨同時接続数: 50ユーザー

### 7.3 可用性
- システム稼働率: 99%以上（年間）
- 計画停止: 月1回、最大2時間

### 7.4 データ処理能力
- 会場データ: 最大10,000件
- 月間トランザクション: 100,000件
- バックアップ時間: 30分以内

## 8. 開発・運用体制

### 8.1 開発体制
- **プロジェクトマネージャー**: 1名
- **システムアーキテクト**: 1名
- **フロントエンド開発者**: 2名
- **バックエンド開発者**: 2名
- **データベース設計者**: 1名
- **QAエンジニア**: 1名

### 8.2 運用体制
- **システム管理者**: 1名
- **運用担当者**: 2名
- **ヘルプデスク**: 1名

### 8.3 保守サポート
- **定期メンテナンス**: 月1回
- **緊急対応**: 24時間365日（オンコール）
- **バックアップ**: 日次自動実行
- **監視**: 24時間自動監視

## 9. 移行計画

### 9.1 データ移行
1. **現状分析**: 既存Excelファイルの構造分析
2. **マッピング設計**: 新旧データ項目のマッピング
3. **移行ツール開発**: 自動移行スクリプトの開発
4. **テスト移行**: 本番環境と同等の環境でのテスト
5. **本番移行**: 段階的なデータ移行実施

### 9.2 システム切り替え
1. **並行稼働期間**: 1ヶ月間の新旧システム並行運用
2. **段階的移行**: 地域別・機能別の段階的切り替え
3. **ユーザートレーニング**: 操作研修の実施
4. **フォローアップ**: 切り替え後の問題対応

## 10. リスク管理

### 10.1 技術的リスク
| リスク | 影響度 | 発生確率 | 対策 |
|--------|--------|----------|------|
| AI精度不足 | 中 | 中 | プロトタイプによる事前検証 |
| パフォーマンス劣化 | 高 | 低 | 負荷テストの実施、スケーリング設計 |
| セキュリティ脆弱性 | 高 | 低 | セキュリティ監査、定期的な更新 |

### 10.2 運用リスク
| リスク | 影響度 | 発生確率 | 対策 |
|--------|--------|----------|------|
| ユーザー抵抗 | 中 | 中 | 十分な研修、段階的導入 |
| データ移行ミス | 高 | 低 | 複数回のテスト、バックアップ確保 |
| システム障害 | 高 | 低 | 冗長化、障害対応手順の整備 |

## 11. コスト見積もり（概算）

### 11.1 初期コスト
- **開発費用**: 要見積もり
- **インフラ構築**: 要見積もり
- **ライセンス費用**: 要見積もり
- **移行費用**: 要見積もり

### 11.2 運用コスト（年間）
- **インフラ費用**: クラウド利用料
- **保守費用**: システム保守契約
- **ライセンス更新**: 各種ソフトウェアライセンス
- **人件費**: 運用担当者

## 12. プロジェクトスケジュール

### フェーズ1: 要件定義・設計（2ヶ月）
- 要件定義書作成
- 基本設計・詳細設計
- データベース設計

### フェーズ2: 開発（4ヶ月）
- フロントエンド開発
- バックエンド開発
- AI機能実装
- 単体テスト

### フェーズ3: テスト（2ヶ月）
- 結合テスト
- システムテスト
- 受入テスト
- 負荷テスト

### フェーズ4: 移行・導入（1ヶ月）
- データ移行
- ユーザー研修
- 並行稼働

### フェーズ5: 本番運用開始
- 本番切り替え
- 運用サポート開始

## 13. 成功指標（KPI）

### 13.1 定量的指標
- **検索時間短縮**: 現状比60%削減
- **データ入力時間**: 現状比50%削減
- **システム稼働率**: 99%以上
- **ユーザー満足度**: 80%以上

### 13.2 定性的指標
- 情報の一元管理実現
- 業務プロセスの標準化
- データ品質の向上
- 意思決定の迅速化

## 14. 今後の拡張計画

### 14.1 機能拡張
- モバイルアプリ開発
- 予約自動化機能
- 料金最適化AI
- 多言語対応

### 14.2 連携拡張
- 会計システム連携
- カレンダーアプリ連携
- SNS連携
- IoTデバイス連携

## 15. 用語集

| 用語 | 説明 |
|------|------|
| 会場 | 防災士研修を実施する施設 |
| 進捗 | 会場予約の状態（仮予約、予約済み等） |
| 部屋 | 同一会場内の個別の部屋・スペース |
| 控室 | 講師・スタッフが使用する別室 |
| 最寄り駅 | 会場へアクセス可能な鉄道駅 |
| 設営日 | 研修前日の会場準備日 |
| 耐震基準 | 1981年以降の建築確認または耐震補強済み |
| AI支援 | 人工知能による情報抽出・分類機能 |
| RBAC | Role-Based Access Control（役割ベースのアクセス制御） |
| JWT | JSON Web Token（認証トークン） |
| SPA | Single Page Application（単一ページアプリケーション） |
| API | Application Programming Interface |

## 16. 参考資料

- 要求定義書
- 要件定義書
- 画面一覧
- テーブル設計書
- API仕様書
- 運用マニュアル
- ユーザーマニュアル

## 17. 改訂履歴

| 版 | 日付 | 作成者 | 改訂内容 |
|----|------|--------|----------|
| 1.0 | 2025-09-07 | システム設計チーム | 初版作成 |