# 防災士研修センター会場管理システム 要件定義書

## 1. システム概要

### 1.1 システム名
防災士研修センター会場管理システム（Venue Management System）

### 1.2 システムの目的
防災士研修センターが日本全国で開催する研修・セミナーの会場情報を一元管理し、Web上に分散している情報を整理・集約することで、最適な会場選定を支援するWebベースの情報管理システム

### 1.3 システム構成
- フロントエンド：React（100% Atomicデザイン）
- バックエンド：Python FastAPI（REST APIサーバー）
- データベース：SQLite（開発）/ PostgreSQL（本番・Replit対応）
- AI連携：OpenAI API
- 認証：独自認証システム
- デプロイ：Replit（将来的にAWS移行）

## 2. 機能要件

### 2.1 会場管理機能

#### 2.1.1 会場情報登録機能
**機能ID**: F-001  
**優先度**: 高

**機能概要**:
新規会場情報を登録する機能

**詳細仕様**:
- 会場基本情報の入力
  - 施設名（必須）
  - 住所（必須）
  - 電話番号（必須）
  - メールアドレス（任意）
  - 担当者名（任意）
  - 公式サイトURL（任意）
  - 予約申込みURL（任意）
  - GoogleマップURL（任意/自動生成可）
- 複数最寄り駅情報の入力
  - 駅名（複数登録可）
  - 路線名
  - 移動手段
  - 所要時間
- 複数部屋情報の入力
  - 部屋名（複数登録可）
  - 各部屋の天井高
  - 各部屋の広さ
  - 各部屋の収容人数
  - 各部屋の設備情報
  - 各部屋に付属する複数控室情報
    - 控室名（複数登録可）
    - 控室面積
    - 控室の机・椅子数
    - 控室の収容人数
    - 控室の備考
- 設備情報（演台、ホワイトボード、スクリーン、マイク、プロジェクター台等）
- 施設条件（飲食可否、土足可否、耐震基準適合）
- 利用条件の入力
  - 利用可能時間
  - 荷物受取可否
- 料金情報の入力
  - メイン会場費用
  - 控室費用
  - 備品費用
  - 概算料金
- 利用条件の入力
  - 予約方法・手順
  - キャンセル規定
  - 支払条件
- 駐車場情報の入力
  - 施設内駐車場（台数、料金）
  - 周辺駐車場情報

**入力チェック**:
- 必須項目の入力確認
- 郵便番号と住所の整合性確認
- 電話番号・メールアドレスの形式確認
- 数値項目の妥当性確認

#### 2.1.2 会場情報編集機能
**機能ID**: F-002  
**優先度**: 高

**機能概要**:
既存会場情報を編集・更新する機能

**詳細仕様**:
- 登録済み会場情報の検索・選択
- 全項目の編集が可能
- 変更前後の差分表示
- 更新理由の入力（任意）
- 更新履歴の自動記録

#### 2.1.3 会場情報削除機能
**機能ID**: F-003  
**優先度**: 中

**機能概要**:
不要な会場情報を削除する機能

**詳細仕様**:
- 論理削除（データは保持し、表示のみ制御）
- 削除確認ダイアログの表示
- 削除理由の入力（必須）
- 削除履歴の記録
- 削除データの復元機能

#### 2.1.4 会場情報一覧表示機能
**機能ID**: F-004  
**優先度**: 高

**機能概要**:
登録済み会場情報を一覧表示する機能

**詳細仕様**:
- ページネーション（1ページ20件）
- ソート機能（施設名、地域、収容人数、料金等）
- 簡易情報表示と詳細情報表示の切り替え
- CSV/Excelエクスポート機能

### 2.2 検索・絞り込み機能

#### 2.2.1 会場検索機能
**機能ID**: F-005  
**優先度**: 高

**機能概要**:
条件を指定して会場を検索する機能

**詳細仕様**:
- フリーワード検索
- 条件検索
  - 地域（都道府県、市区町村）
  - 収容人数（範囲指定）
  - 料金（範囲指定）
  - 設備条件（複数選択可）
  - 利用可能日
  - 駅からの距離
- 検索条件の保存・呼び出し
- 検索結果の表示（リスト/地図）

#### 2.2.2 詳細フィルタリング機能
**機能ID**: F-006  
**優先度**: 中

**機能概要**:
検索結果をさらに詳細な条件で絞り込む機能

**詳細仕様**:
- 飲食可否でフィルタ
- 土足可否でフィルタ
- 耐震基準適合でフィルタ
- 控室有無でフィルタ
- 駐車場有無でフィルタ
- 複数条件のAND/OR検索

### 2.3 イベント管理機能

#### 2.3.1 イベント履歴管理機能
**機能ID**: F-007  
**優先度**: 中

**機能概要**:
過去のイベント開催履歴を管理する機能

**詳細仕様**:
- イベント情報の記録
  - イベント名
  - 開催日
  - 使用会場
  - 使用部屋
  - 参加人数
- 履歴の検索・絞り込み
- 実績レポートの出力

#### 2.3.2 カレンダー表示機能
**機能ID**: F-008  
**優先度**: 低

**機能概要**:
イベント開催予定をカレンダー形式で表示する機能

**詳細仕様**:
- 月表示/週表示/日表示
- 会場別カレンダー
- 地域別カレンダー
- イベント情報の表示

### 2.4 ユーザー管理機能

#### 2.4.1 ユーザー登録機能
**機能ID**: F-009  
**優先度**: 高

**機能概要**:
システム利用者を登録する機能

**詳細仕様**:
- ユーザー情報の登録
  - メールアドレス（必須/ユニーク）
  - パスワード（必須/暗号化）
  - 氏名（必須）
  - 所属部署（任意）
  - 電話番号（任意）
- メールアドレス認証
- パスワードポリシーの適用

#### 2.4.2 権限管理機能
**機能ID**: F-010  
**優先度**: 高

**機能概要**:
ユーザーの権限を管理する機能

**詳細仕様**:
- 権限レベルの設定
  - システム管理者（全機能利用可）
  - 運営管理者（会場情報の編集可）
  - 一般利用者（閲覧のみ）
  - カスタム権限
- 機能別アクセス制御
- 地域別アクセス制御

#### 2.4.3 ログイン/ログアウト機能
**機能ID**: F-011  
**優先度**: 高

**機能概要**:
システムへのログイン/ログアウト機能

**詳細仕様**:
- メールアドレス/パスワードによる認証
- セッション管理（タイムアウト設定）
- 自動ログアウト機能
- パスワードリセット機能
- 二要素認証（オプション）

### 2.5 履歴管理機能

#### 2.5.1 更新履歴記録機能
**機能ID**: F-012  
**優先度**: 高

**機能概要**:
データの更新履歴を自動記録する機能

**詳細仕様**:
- 記録項目
  - 更新日時
  - 更新者
  - 更新対象（会場ID、項目名）
  - 更新前の値
  - 更新後の値
  - 更新理由（任意）
- 自動記録（ユーザー操作不要）

#### 2.5.2 履歴閲覧機能
**機能ID**: F-013  
**優先度**: 中

**機能概要**:
更新履歴を閲覧する機能

**詳細仕様**:
- 会場別履歴表示
- ユーザー別履歴表示
- 期間指定での絞り込み
- 変更内容の詳細表示
- 履歴のエクスポート（CSV）

#### 2.5.3 データ復元機能
**機能ID**: F-014  
**優先度**: 低

**機能概要**:
過去のデータ状態に復元する機能

**詳細仕様**:
- 特定時点のデータ表示
- 選択的復元（項目単位）
- 復元前の確認画面
- 復元履歴の記録

### 2.6 AI支援機能

#### 2.6.1 会場情報自動抽出機能
**機能ID**: F-015  
**優先度**: 中

**機能概要**:
テキスト貼り付けにより会場情報を自動抽出する機能

**詳細仕様**:
- テキスト入力エリア（大量テキスト対応）
- OpenAI APIによる情報抽出
  - 施設名
  - 住所
  - 電話番号・メールアドレス
  - 複数部屋情報の識別
  - 複数最寄り駅情報の抽出
  - 料金情報
- 住所からGoogleマップURLの自動生成
- 抽出結果の確認・編集画面
- 信頼度スコアの表示
- 解析結果のユーザー確認・修正機能

#### 2.6.2 情報自動分類機能
**機能ID**: F-016  
**優先度**: 低

**機能概要**:
貼り付けたテキストから情報を自動分類する機能

**詳細仕様**:
- テキスト入力エリア
- AIによる自動分類
- 各フィールドへの自動入力
- 分類結果の修正機能

#### 2.6.3 入力補助機能
**機能ID**: F-017  
**優先度**: 低

**機能概要**:
入力内容を基に関連情報を提案する機能

**詳細仕様**:
- 住所入力時の郵便番号自動補完
- 駅名入力時の路線情報提案
- 類似会場の情報参照
- 入力ミスの自動検出

### 2.7 レポート機能

#### 2.7.1 利用統計レポート
**機能ID**: F-018  
**優先度**: 低

**機能概要**:
会場利用状況の統計レポートを生成する機能

**詳細仕様**:
- 月別/年別利用実績
- 地域別利用実績
- 費用分析レポート
- グラフ表示機能
- PDFエクスポート

#### 2.7.2 会場比較レポート
**機能ID**: F-019  
**優先度**: 低

**機能概要**:
複数会場を比較するレポートを生成する機能

**詳細仕様**:
- 比較対象の選択（最大5件）
- 比較項目の選択
- 比較表の生成
- レーダーチャート表示

### 2.8 システム管理機能

#### 2.8.1 マスタメンテナンス機能
**機能ID**: F-020  
**優先度**: 中

**機能概要**:
システムのマスタデータを管理する機能

**詳細仕様**:
- 都道府県マスタ
- 設備マスタ
- ステータスマスタ
- マスタデータのインポート/エクスポート

#### 2.8.2 バックアップ/リストア機能
**機能ID**: F-021  
**優先度**: 高

**機能概要**:
データのバックアップとリストアを行う機能

**詳細仕様**:
- 自動バックアップ（日次）
- 手動バックアップ
- バックアップファイルの管理
- リストア機能
- バックアップ履歴の表示

## 3. 画面要件

### 3.1 画面一覧
1. ログイン画面
2. ダッシュボード画面
3. 会場一覧画面
4. 会場詳細画面
5. 会場登録画面
6. 会場編集画面
7. 会場検索画面
8. イベント履歴画面
9. カレンダー画面
10. ユーザー管理画面
11. 権限設定画面
12. 履歴一覧画面
13. AI入力支援画面
14. レポート画面
15. システム設定画面

### 3.2 画面遷移
- ログイン → ダッシュボード
- ダッシュボード → 各機能画面
- 会場一覧 → 会場詳細
- 会場詳細 → 会場編集
- 検索画面 → 検索結果 → 会場詳細

## 4. データ要件

### 4.1 データ項目
Excelファイルの分析結果に基づく主要データ項目：

1. **会場基本情報**
   - 施設名
   - 住所
   - 電話番号
   - メールアドレス
   - 担当者名
   - 公式サイトURL
   - 予約申込みURL
   - GoogleマップURL
   - 複数最寄り駅情報

2. **会場詳細情報**
   - 複数部屋情報（配列）
     - 部屋名
     - 天井高
     - 広さ
     - 机の数
     - 椅子の数
     - 収容人数
     - 部屋別設備

3. **設備情報**
   - 演台
   - ホワイトボード
   - スクリーン
   - ワイヤレスマイク
   - プロジェクター台
   - その他備品

4. **利用条件**
   - 飲食可否
   - 土足可否
   - 耐震基準
   - 利用可能時間
   - 荷物受取

5. **料金情報**
   - 控室費用
   - メイン会場費用
   - 備品費用
   - 概算料金

6. **利用条件情報**
   - 予約方法
   - キャンセル規定
   - 支払条件

7. **駐車場情報**
   - 駐車台数
   - 駐車料金
   - 周辺駐車場情報

### 4.2 データ量
- 初期データ：約200件（既存Excel データ）
- 年間増加見込み：約50件
- 5年後想定データ量：約500件

## 5. 外部インターフェース要件

### 5.1 外部システム連携
- メール送信システム（通知機能）
- 地図サービスAPI（Google Maps）
- OpenAI API（GPT-4モデル）
- 郵便番号API

### 5.2 データ移行
- 既存Excelファイルからのデータインポート
- CSVファイルのインポート/エクスポート
- JSONファイルのインポート/エクスポート（フェーズ1）
- PDFレポート出力

## 6. 非機能要件

### 6.1 性能要件
- レスポンスタイム：3秒以内（検索処理）
- 同時接続数：2-3ユーザー（小規模運用最適化）
- フェーズ1：JSONファイルベースの高速プロトタイプ
- フェーズ2以降：データベース対応

### 6.2 セキュリティ要件
- HTTPS通信の実装
- パスワードの暗号化保存
- SQLインジェクション対策
- XSS対策
- CSRF対策
- アクセスログの記録

### 6.3 ユーザビリティ要件
- レスポンシブデザイン（モバイル・デスクトップのみ、タブレット不要）
- 100% Atomicデザインによる一貫性のあるUI
- 多言語対応（日本語メイン）
- アクセシビリティ対応（WCAG 2.1 Level AA準拠）
- ブラウザ対応（Chrome, Firefox, Safari, Edge最新版）

### 6.4 可用性要件
- 稼働率：99%以上
- 計画停止：月1回、最大2時間
- バックアップ：日次自動バックアップ
- 障害復旧時間：4時間以内

### 6.5 保守性要件
- ログ出力（アプリケーション、アクセス、エラー）
- モニタリング機能
- ドキュメント整備
- テスト自動化

## 7. 移行要件

### 7.1 データ移行
- フェーズ1：JSONファイルでのプロトタイプ運用
- フェーズ2：SQLiteデータベースへの移行
- フェーズ3：PostgreSQLへの本番移行
- 既存Excelファイルからのデータ移行
- データクレンジング処理
- 移行データの検証

### 7.2 ユーザー移行
- ユーザーアカウントの事前作成
- 操作マニュアルの提供
- トレーニングの実施

## 8. 制約事項

- Webベースシステムとして実装
- フロントエンド：React（100% Atomicデザイン）
- バックエンド：Python（FastAPI）
- データベース：SQLite/PostgreSQL
- デプロイ先：Replit（将来的にAWS）
- 日本国内での利用を前提
- 個人情報保護法への準拠
- 既存業務フローとの互換性維持

## 9. 前提条件

- インターネット接続環境
- 対応ブラウザのインストール
- 基本的なPC操作スキル
- 定期的なシステムメンテナンス

## 10. 用語定義

| 用語 | 定義 |
|------|------|
| 会場 | 防災士研修を実施する施設 |
| 部屋 | 同一会場内の個別の部屋・スペース |
| 控室 | 講師・スタッフ用の別室 |
| 設営日 | 研修前日の準備日 |
| 耐震基準 | 1981年以降の建築確認または耐震補強済み |
| 概算料金 | 2.5日間の利用を想定した総額 |
| 最寄り駅 | 会場へアクセス可能な鉄道駅 |

## 11. 改訂履歴

| 版 | 日付 | 作成者 | 改訂内容 |
|----|------|--------|----------|
| 1.0 | 2025-09-07 | システム設計チーム | 初版作成 |
| 1.1 | 2025-09-07 | システム設計チーム | 技術スタック更新、AI機能をテキスト解析に変更、段階的実装フェーズ追加 |